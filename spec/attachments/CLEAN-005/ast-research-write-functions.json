{
  "matches": [
    {
      "type": "function_item",
      "name": "new",
      "line": 22,
      "column": 4,
      "text": "pub fn new() -> Self {\n        let mut properties = serde_json::Map::new();\n\n        properties.insert(\n            \"file_path\".to_string(),\n            json!({\n                \"type\": \"string\",\n                \"description\": \"Absolute path to the file to write\"\n            }),\n        );\n\n        properties.insert(\n            \"content\".to_string(),\n            json!({\n                \"type\": \"string\",\n                \"description\": \"Content to write to the file\"\n            }),\n        );\n\n        Self {\n            parameters: ToolParameters {\n                schema_type: \"object\".to_string(),\n                properties,\n                required: vec![\"file_path\".to_string(), \"content\".to_string()],\n            },\n        }\n    }"
    },
    {
      "type": "function_item",
      "name": "default",
      "line": 52,
      "column": 4,
      "text": "fn default() -> Self {\n        Self::new()\n    }"
    },
    {
      "type": "function_item",
      "name": "name",
      "line": 59,
      "column": 4,
      "text": "fn name(&self) -> &str {\n        \"Write\"\n    }"
    },
    {
      "type": "function_item",
      "name": "description",
      "line": 63,
      "column": 4,
      "text": "fn description(&self) -> &str {\n        \"Write content to a file. Creates parent directories if they don't exist.\"\n    }"
    },
    {
      "type": "function_item",
      "name": "parameters",
      "line": 67,
      "column": 4,
      "text": "fn parameters(&self) -> &ToolParameters {\n        &self.parameters\n    }"
    },
    {
      "type": "function_item",
      "name": "execute",
      "line": 71,
      "column": 4,
      "text": "async fn execute(&self, args: Value) -> Result<ToolOutput> {\n        debug!(tool = \"Write\", input = ?args, \"Executing tool\");\n\n        let file_path = args.get(\"file_path\").and_then(|v| v.as_str()).unwrap_or(\"\");\n\n        let content = args.get(\"content\").and_then(|v| v.as_str()).unwrap_or(\"\");\n\n        // Validate absolute path\n        let path = match require_absolute_path(file_path) {\n            Ok(p) => p,\n            Err(e) => return Ok(e),\n        };\n\n        // Create parent directories if needed\n        if let Some(parent) = path.parent() {\n            if !parent.exists() {\n                if let Err(e) = fs::create_dir_all(parent) {\n                    return Ok(ToolOutput::error(format!(\n                        \"Error creating directories: {e}\"\n                    )));\n                }\n            }\n        }\n\n        // Write file\n        match fs::write(path, content) {\n            Ok(()) => {\n                // Format diff output for CLI-007 diff rendering\n                // Show each line as an addition\n                let diff_lines: Vec<String> =\n                    content.lines().map(|line| format!(\"+ {line}\")).collect();\n                let diff_output = format!(\"File: {}\\n{}\", file_path, diff_lines.join(\"\\n\"));\n                Ok(ToolOutput::success(diff_output))\n            }\n            Err(e) => Ok(ToolOutput::error(format!(\"Error writing file: {e}\"))),\n        }\n    }"
    },
    {
      "type": "function_item",
      "name": "definition",
      "line": 139,
      "column": 4,
      "text": "async fn definition(&self, _prompt: String) -> rig::completion::ToolDefinition {\n        rig::completion::ToolDefinition {\n            name: \"write\".to_string(),\n            description: \"Write content to a file. Creates parent directories if they don't exist.\"\n                .to_string(),\n            parameters: serde_json::to_value(schemars::schema_for!(WriteArgs))\n                .unwrap_or_else(|_| json!({\"type\": \"object\"})),\n        }\n    }"
    },
    {
      "type": "function_item",
      "name": "call",
      "line": 149,
      "column": 4,
      "text": "async fn call(&self, args: Self::Args) -> Result<Self::Output, Self::Error> {\n        // Validate absolute path\n        let path = require_absolute_path(&args.file_path)\n            .map_err(|e| WriteError::ValidationError(e.content))?;\n\n        // Create parent directories if needed\n        if let Some(parent) = path.parent() {\n            if !parent.exists() {\n                fs::create_dir_all(parent).map_err(|e| {\n                    WriteError::FileError(format!(\"Error creating directories: {e}\"))\n                })?;\n            }\n        }\n\n        // Write file\n        fs::write(path, &args.content)\n            .map_err(|e| WriteError::FileError(format!(\"Error writing file: {e}\")))?;\n\n        Ok(format!(\"Successfully wrote to {}\", args.file_path))\n    }"
    }
  ]
}
